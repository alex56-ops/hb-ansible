---
# User running the Jitsi containers
service_jitsi_user: "{{ baseline_config_admin_users[0].name }}"

# Base directory for Jitsi files
service_jitsi_base_dir: /opt/jitsi

# Domain — REQUIRED, set in host/group vars
service_jitsi_domain: ""

# Container images — pin to specific versions
service_jitsi_web_image: docker.io/jitsi/web:stable-9646
service_jitsi_prosody_image: docker.io/jitsi/prosody:stable-9646
service_jitsi_jicofo_image: docker.io/jitsi/jicofo:stable-9646
service_jitsi_jvb_image: docker.io/jitsi/jvb:stable-9646

# JVB media port (UDP, must be opened in firewall)
service_jitsi_jvb_port: 10000

# XMPP domains
service_jitsi_xmpp_domain: meet.jitsi
service_jitsi_xmpp_auth_domain: auth.meet.jitsi
service_jitsi_xmpp_guest_domain: guest.meet.jitsi
service_jitsi_xmpp_muc_domain: muc.meet.jitsi
service_jitsi_xmpp_internal_muc_domain: internal-muc.meet.jitsi

# Auth passwords (from vault)
service_jitsi_jicofo_auth_password: "{{ vault_jitsi_jicofo_auth_password }}"
service_jitsi_jvb_auth_password: "{{ vault_jitsi_jvb_auth_password }}"

# Authentication (set to true to require login for room creation)
service_jitsi_enable_auth: false
service_jitsi_auth_type: internal

# STUN servers
service_jitsi_stun_servers: "meet-jit-si-turnrelay.jitsi.net:443"

# Timezone
service_jitsi_timezone: Europe/Berlin

# OIDC authentication via Authelia (uses jitsi-openid adapter)
service_jitsi_oidc_enabled: true
service_jitsi_openid_image: docker.io/marlocation/jitsi-openid:1.2.0
service_jitsi_oidc_issuer_url: "https://{{ service_authelia_domain }}"
service_jitsi_oidc_client_id: jitsi
service_jitsi_oidc_client_secret: "{{ vault_authelia_oidc_jitsi_client_secret }}"
service_jitsi_jwt_secret: "{{ vault_jitsi_jwt_secret }}"

# Podman network (shared with Caddy)
service_jitsi_network: "{{ service_caddy_network }}"

# Caddy base directory for site config drop-in
service_jitsi_caddy_base_dir: "{{ service_caddy_base_dir | default('/opt/caddy') }}"
