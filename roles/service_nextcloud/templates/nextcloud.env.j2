# {{ ansible_managed }}
POSTGRES_HOST=nextcloud-db
POSTGRES_DB={{ service_nextcloud_db_name }}
POSTGRES_USER={{ service_nextcloud_db_user }}
POSTGRES_PASSWORD={{ service_nextcloud_db_password }}
NEXTCLOUD_ADMIN_USER={{ service_nextcloud_admin_user }}
NEXTCLOUD_ADMIN_PASSWORD={{ service_nextcloud_admin_password }}
NEXTCLOUD_TRUSTED_DOMAINS={{ service_nextcloud_domain }}
OVERWRITEPROTOCOL=https
OVERWRITECLIURL=https://{{ service_nextcloud_domain }}
TRUSTED_PROXIES=caddy
APACHE_BODY_LIMIT=0
{% if service_nextcloud_oidc_enabled %}
# OIDC â€” requires manual app installation:
#   podman exec -u www-data nextcloud php occ app:install user_oidc
# Then configure the provider via Admin > Settings > User OIDC
# Provider URL: {{ service_nextcloud_oidc_provider_url }}
# Client ID: {{ service_nextcloud_oidc_client_id }}
# Client Secret: stored in vault
NC_OIDC_PROVIDER_URL={{ service_nextcloud_oidc_provider_url }}
NC_OIDC_CLIENT_ID={{ service_nextcloud_oidc_client_id }}
NC_OIDC_CLIENT_SECRET={{ service_nextcloud_oidc_client_secret }}
{% endif %}
